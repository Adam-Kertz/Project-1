(window.webpackJsonp=window.webpackJsonp||[]).push([[1,74],{377:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return m}));var a=r(8),s=r.n(a),n=r(14);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=d(e);if(t){var s=d(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=n.createContext({});function m(e){return function(t){var r;return h(r=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(d,r);var a,s,i,p=u(d);function d(){return o(this,d),p.apply(this,arguments)}return a=d,(s=[{key:"getChildContext",value:function(){return{analyticsLocation:e}}},{key:"render",value:function(){return n.createElement(b.Provider,{value:e},n.createElement(t,this.props||{}))}}])&&l(a.prototype,s),i&&l(a,i),Object.defineProperty(a,"prototype",{writable:!1}),d}(n.Component),"childContextTypes",{analyticsLocation:s.a.object}),h(r,"contextTypes",{analyticsLocation:s.a.object}),r}}},383:function(e,t,r){"use strict";r.r(t);var a=r(41),s=r(364),n=r(367),i=r(10),o=r(14),l=r(363),c=r.n(l);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r,a,s={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h=Object.freeze({DEFAULT:"DEFAULT",LARGE:"LARGE"});class b extends o.PureComponent{constructor(){super(...arguments),d(this,"onClickPageNumber",e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-page-num");if(!t)return void Object(i.default)("clPagerBase.clickPageNumberError","Error fetching attribute data-page-num");const r=parseInt(t,10);this.props.pageNumber!==r&&this.props.onPaginate(r)}),d(this,"onClickPrev",e=>{e.preventDefault(),this.props.onPaginate(this.props.pageNumber-1)}),d(this,"onClickNext",e=>{e.preventDefault(),this.props.onPaginate(this.props.pageNumber+1)}),d(this,"_onClickKeyDownPageNumberProps",Object(n.d)({onClick:this.onClickPageNumber})),d(this,"_onClickKeyDownPrevProps",Object(n.d)({onClick:this.onClickPrev})),d(this,"_onClickKeyDownNextProps",Object(n.d)({onClick:this.onClickNext}))}render(){const e=this.props,{className:t,size:r,pageNumber:n,maxVisiblePageButtons:i,totalResults:l,totalPages:d,resultsPerPage:h,onPaginate:b}=e,m=p(e,["className","size","pageNumber","maxVisiblePageButtons","totalResults","totalPages","resultsPerPage","onPaginate"]),g=function(e){let{totalResults:t,totalPages:r,resultsPerPage:a}=e;if("number"==typeof r&&r>=0)return r;if("number"==typeof t&&t>=0&&"number"==typeof a&&a>=1)return Math.ceil(t/a);return 0}(this.props),f=n>1,y=n<g,{visiblePageNumbers:v,hasLowerPages:O,hasHigherPages:P}=function(e){let{pageNumber:t,maxVisiblePageButtons:r,totalPages:a}=e;const s=Array.from({length:a}).map((e,t)=>t+1);let n;n=a<=r?s:t<r/2?s.slice(0,r):a-r/2<t?s.slice(a-r,a):s.slice(t-Math.ceil(r/2),t+Math.floor(r/2));const i=n[0],o=n[n.length-1];return{visiblePageNumbers:n,hasLowerPages:"number"==typeof i&&1!==i,hasHigherPages:"number"==typeof o&&o!==a}}({pageNumber:n,maxVisiblePageButtons:i,totalPages:g});return 0===v.length?null:o.createElement("div",u({className:c()({"cl-pager":!0,"cl-pager--size-default":"DEFAULT"===r,"cl-pager--size-large":"LARGE"===r,"cl-pager--has-prev-enabled":f,"cl-pager--has-next-enabled":y,"cl-pager--has-lower-pages":O,"cl-pager--has-higher-pages":P},t),"data-curr-page-num":n,"data-total-pages":g},m),o.createElement("button",u({disabled:!f,"aria-label":Object(a.c)(e=>e.componentLibrary.pager.ariaLabelPrevPage),key:"prev",className:"cl-pager__button cl-pager__prev","data-test-id":"previous-page"},f?this._onClickKeyDownPrevProps:{}),o.createElement("div",{className:"cl-pager__button-label"},o.createElement(s.a,{icon:"arrow-lite"}))),o.createElement("div",{"aria-hidden":!O||void 0,key:"lower",className:"cl-pager__button cl-pager__button--is-disabled cl-pager__lower"},o.createElement("div",{className:"cl-pager__button-label"},"...")),v.map(e=>o.createElement("button",u({key:e,className:c()({"cl-pager__button":!0,"cl-pager__number":!0,"cl-pager__number--is-active":e===n}),"data-test-id":e===n?"active-page":"inactive-page","aria-label":e===n?Object(a.c)(e=>e.componentLibrary.pager.ariaLabelNavigateCurrentPage,e):Object(a.c)(e=>e.componentLibrary.pager.ariaLabelNavigateToPage,e),"data-page-num":e},this._onClickKeyDownPageNumberProps),o.createElement("div",{className:"cl-pager__button-label"},e.toLocaleString()))),o.createElement("div",{"aria-hidden":!P||void 0,key:"higher",className:"cl-pager__button cl-pager__button--is-disabled  cl-pager__higher"},o.createElement("div",{className:"cl-pager__button-label"},"...")),o.createElement("button",u({disabled:!y,"aria-label":Object(a.c)(e=>e.componentLibrary.pager.ariaLabelNextPage),key:"next",className:"cl-pager__button cl-pager__next","data-test-id":"next-page"},y?this._onClickKeyDownNextProps:{}),o.createElement("div",{className:"cl-pager__button-label"},o.createElement(s.a,{icon:"arrow-lite"}))))}}d(b,"defaultProps",{pageNumber:1,maxVisiblePageButtons:5,size:h.DEFAULT}),r.d(t,"SIZE",(function(){return m})),r.d(t,"default",(function(){return g})),r.d(t,"exampleConfig",(function(){return f}));const m=h;function g(e){return o.createElement(b,e)}g.defaultProps={maxVisiblePageButtons:b.defaultProps.maxVisiblePageButtons,size:b.defaultProps.size};const f={getComponent:()=>g,fields:[{name:"pageNumber",desc:"Current number for the page",value:{type:"number",default:1}},{name:"totalPages",desc:"Number of pages that can be navigated to (takes priority over totalResults and resultsPerPage)",value:{type:"number",default:10}},{name:"maxVisiblePageButtons",desc:"Number of buttons that can be rendered at once",value:{type:"number",default:g.defaultProps.maxVisiblePageButtons}},{name:"totalResults",desc:"Number of results which are in the list",value:{type:"number",default:null}},{name:"resultsPerPage",desc:"Number of results that are rendered per page",value:{type:"number",default:null}},{name:"size",desc:"Space taken up by the pager buttons",value:{type:"select",default:g.defaultProps.size,options:Object.keys(m)}},{name:"className",desc:"HTML classes to be added to pager",value:{type:"text",default:""}}],examples:[{title:"Page 1 of 10",desc:"Pagination starting at page 1",props:{pageNumber:1,totalPages:10,maxVisiblePageButtons:5,className:""}},{title:"Page 2 of 10",desc:"Pagination starting at page 2",props:{pageNumber:2,totalPages:10,maxVisiblePageButtons:5,className:""}},{title:"Page 4 of 10",desc:"Pagination starting at page 4",props:{pageNumber:4,totalPages:10,maxVisiblePageButtons:5,className:""}},{title:"Page 9 of 10",desc:"Pagination starting at page 9",props:{pageNumber:9,totalPages:10,maxVisiblePageButtons:5,className:""}},{title:"Page 10 of 10",desc:"Pagination starting at page 10",props:{pageNumber:10,totalPages:10,maxVisiblePageButtons:5,className:""}},{title:"Page 5 of 10, Large",desc:"Pagination starting at page 5, on a mobile device",props:{pageNumber:5,totalPages:10,maxVisiblePageButtons:5,size:m.LARGE,className:""}},{title:"Page 3 of 7, showing 4 numbers",desc:"Pagination starting at page 3, but only showing 4 numbers at a time",props:{pageNumber:3,totalPages:7,maxVisiblePageButtons:4,className:""}}],events:{onPaginate:e=>({requestedPageNumber:e})}}},394:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var a=r(363),s=r.n(a),n=r(8),i=r.n(n),o=r(14),l=r.n(o);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends o.PureComponent{render(){const e=s()("flex-container",{["flex-"+this.props.layout]:this.props.layout,[`flex-${this.props.layoutLg}-lg`]:this.props.layoutLg,[`flex-${this.props.layoutMed}-med`]:this.props.layoutMed,[`flex-${this.props.layoutSm}-sm`]:this.props.layoutSm,[`flex-${this.props.position}-pos`]:this.props.position,"flex-wrap":this.props.wrap},this.props.className);return l.a.createElement("div",{className:e,"data-test-id":this.props.testId,role:this.props.role,id:this.props.id},this.props.children)}}c(u,"propTypes",{className:i.a.string,layout:i.a.oneOf(["row","column"]),layoutLg:i.a.oneOf(["row","column"]),layoutMed:i.a.oneOf(["row","column","column-reverse"]),layoutSm:i.a.oneOf(["row","column"]),position:i.a.oneOf(["static","relative","absolute","fixed"]),wrap:i.a.bool,testId:i.a.string,id:i.a.string,role:i.a.string}),c(u,"defaultProps",{testId:null,id:null,role:null})},397:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var a,s,n,i=r(363),o=r.n(i),l=r(8),c=r.n(l),u=r(14),p=r.n(u);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r,a,s={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}class b extends u.PureComponent{render(){const e=this.props,{width:t,children:r,testId:a,className:s}=e,n=h(e,["width","children","testId","className"]),i=o()("flex-item",t?"flex-item--width-"+t:"",s);return p.a.createElement("div",d({className:i},n,{"data-test-id":a}),r)}}a=b,s="propTypes",n={className:c.a.string,width:c.a.string,testId:c.a.string},s in a?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n},432:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"d",(function(){return l}));var a=r(177);const s=()=>Object(a.b)({id:"pdf_available_filter_button"}),n=()=>Object(a.b)({id:"facet_has_pdf"}),i=e=>Object(a.b)({id:"facet_"+e}),o=()=>Object(a.b)({id:"year_range_presets"}),l=()=>Object(a.b)({id:"sort_select"})},443:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return o}));var a=r(0);const s={FIELD_OF_STUDY:"FIELD_OF_STUDY",AUTHOR:"AUTHOR",COAUTHOR:"COAUTHOR",HAS_PDF:"HAS_PDF",VENUE:"VENUE",DATE:"DATE",QUERY_TEXT:"QUERY_TEXT",CITATION_INTENT:"CITATION_INTENT"},n={startVisible:a.b.List(["FIELD_OF_STUDY","DATE","HAS_PDF","AUTHOR","VENUE"]),startInModal:a.b.List(),collapseToModal:a.b.List(["AUTHOR","VENUE"]),includeClearOnQuery:!1},i={startVisible:a.b.List(["COAUTHOR","HAS_PDF"]),startInModal:a.b.List(["DATE","FIELD_OF_STUDY","VENUE"]),collapseToModal:a.b.List(["COAUTHOR","HAS_PDF"]),includeClearOnQuery:!0},o={startVisible:a.b.List(["DATE","CITATION_INTENT","HAS_PDF","AUTHOR"]),startInModal:a.b.List(["VENUE","FIELD_OF_STUDY"]),collapseToModal:a.b.List(["DATE","CITATION_INTENT","HAS_PDF","AUTHOR"]),includeClearOnQuery:!0}},444:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a=r(366),s=r(426),n=r(435),i=r(376),o=r(373),l=r(377),c=r(374),u=r(60),p=r(41),d=r(37),h=r(515),b=r(14),m=r(363),g=r.n(m);const f=90,y=e=>{let{paper:t,query:r,className:m,abstract:y,tldr:v}=e;const[O,P]=b.useState(!1),E=b.useContext(l.a),{onToggleAbstract:w}=b.useContext(o.a),T=b.useRef(null),x=b.useRef(null),C=b.useRef(!1),S=b.useCallback((e,r)=>{if(r.stopPropagation(),w({expandState:e}),E){const r=e===i.b?"MORE":"LESS",a=u.a.getIn(E,"Tldr",r);Object(d.a)(new c.a(a,{corpusID:t.corpusId}))}P(e===i.b)},[w]);b.useEffect(()=>(C&&C.current?x&&x.current&&x.current.querySelector(".more-toggle").focus():C.current=!0,()=>clearTimeout(T.current)),[O]);const N=b.useCallback(e=>S(i.b,e)),_=b.useCallback(e=>S(i.a,e));return t.tldr?t.tldr.abstractSimilarityScore&&t.tldr.abstractSimilarityScore>f?b.createElement(s.default,{paper:t}):b.createElement("div",{ref:x,className:g()("tldr-abstract-replacement text-truncator",m)},!0===v?b.createElement(h.a,{paper:t,query:r}):v,!O&&b.createElement(a.default,{"aria-label":Object(p.c)(e=>e.textTruncator.default.extendAriaLabel),label:Object(p.c)(e=>e.textTruncator.default.extendLabel),className:"more mod-clickable more-toggle",onClick:N,type:a.TYPE.TERTIARY}),!!O&&b.createElement(b.Fragment,null,b.createElement(n.default,{className:"tldr-abstract__rule"}),!0===y?b.createElement("div",{className:"tldr-abstract__pill"},b.createElement("span",{className:"tldr-abstract-replacement__pill"},Object(p.c)(e=>e.tldr.abstractLabel))):y,b.createElement(i.c,{field:t.paperAbstract,fullTextClassName:"full-abstract"})," ",b.createElement(a.default,{"aria-label":Object(p.c)(e=>e.textTruncator.default.truncateAriaLabel),label:Object(p.c)(e=>e.textTruncator.default.truncateLabel),className:"more mod-clickable more-toggle",onClick:_,type:a.TYPE.TERTIARY}))):b.createElement(s.default,{paper:t})};y.defaultProps={abstract:!0,tldr:!0},t.b=y},464:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a=r(370),s=r(60),n=r(364),i=r(41),o=r(491),l=r(37),c=r(432),u=r(363),p=r.n(u),d=r(8),h=r.n(d),b=r(14);function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class f extends b.PureComponent{constructor(){super(...arguments),g(this,"handleChangeSort",e=>{const t="string"==typeof e?e:e.target.value;this.props.onChangeSort&&this.props.onChangeSort(t);const r=this.context.analyticsLocation;if(r){const e=s.a.getIn(r,"SORT_BY");Object(l.a)(o.a.create(e,{sort:t}))}else Object(l.a)(o.a.create(s.a.SORT_BY,{sort:t}))})}render(){const{className:e,heapProps:t}=this.props,r=p()(e,"search-sort flex-row-vcenter");return b.createElement("div",{className:r},b.createElement("select",m({className:"legacy__select search-sort-select",onChange:this.handleChangeSort,value:this.props.sort},t?Object(a.a)(t):Object(c.d)(),{"data-test-id":"sort-select"}),this.props.options.map(e=>{const t=Object(i.c)(t=>t.sort[e.id].label);return b.createElement("option",{value:e.id,key:e.id,"data-test-id":"sort-by-"+e.id},Object(i.c)(e=>e.sort.label,t))})),b.createElement(n.a,{icon:"disclosure",height:"12",width:"12",className:"dropdown-arrow-icon"}))}}g(f,"contextTypes",{analyticsLocation:h.a.object})},474:function(e,t,r){"use strict";var a=r(125),s={HOVER:"HOVER",CLICK:"CLICK"},n={TOOLTIP_HIDE_DELAY:250,TOOLTIP_SHOW_DELAY:100},i=r(367),o=r(363),l=r.n(o),c=r(8),u=r.n(c),p=r(14),d=r.n(p),h=r(176),b=r.n(h);function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return f}));class f extends p.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),g(this,"showTooltip",()=>{clearTimeout(this.currentTimer),this.state.tooltipIsVisible||(this.currentTimer=setTimeout(()=>{this.setState({tooltipIsVisible:!0})},n.TOOLTIP_SHOW_DELAY))}),g(this,"hideTooltip",()=>{clearTimeout(this.currentTimer),this.state.tooltipIsVisible&&(this.currentTimer=setTimeout(()=>{this.setState({tooltipIsVisible:!1})},n.TOOLTIP_SHOW_DELAY))}),g(this,"hideTooltipOnPageClick",e=>{const t=this.refs.tooltip;e.target===t||t.contains(e.target)||this.hideTooltip(e)}),g(this,"toggleTooltip",e=>{const t=b.a.findDOMNode(this);!this.state.tooltipIsVisible&&e&&t.contains(e.target)||t===e.target?this.showTooltip():this.hideTooltip()}),g(this,"_onClickKeyDownToggleProps",Object(i.d)({onClick:this.toggleTooltip})),this.state={tooltipIsVisible:!1}}componentWillUnmount(){clearTimeout(this.currentTimer),this.listener&&(document.removeEventListener("click",this.listener),this.listener=void 0)}componentDidMount(){this.state.tooltipIsVisible&&(this.props.interactionType===s.CLICK&&(this.listener=this.hideTooltipOnPageClick,document.addEventListener("click",this.listener)),"function"==typeof this.props.onShow&&this.props.onShow())}componentDidUpdate(e,t){!t.tooltipIsVisible&&this.state.tooltipIsVisible&&"function"==typeof this.props.onShow&&this.props.onShow(),!this.listener&&this.state.tooltipIsVisible&&this.props.interactionType===s.CLICK?(this.listener=this.hideTooltipOnPageClick,document.addEventListener("click",this.listener)):this.listener&&(document.removeEventListener("click",this.listener),this.listener=void 0)}renderTooltipContent(){if(this.state.tooltipIsVisible){const e=["tooltip","mod-tooltip-"+this.props.tooltipPosition,this.props.tooltipClassName].join(" ").trim(),t=l()("tooltip-pointer-arrow",this.props.tooltipArrowClassName);return d.a.createElement("div",{className:e,ref:"tooltip"},d.a.createElement("span",{className:"tooltip-pointer"},d.a.createElement("span",{className:t})),this.props.tooltipContent)}return null}render(){const{envInfo:{isMobile:e}}=this.context,{testId:t}=this.props,r=l()("tooltip-parent",this.props.className,{"tooltip-mobile":e}),a=this.props.interactionType===s.CLICK,n=this.props.interactionType===s.HOVER;return d.a.createElement("div",m({className:r,onMouseEnter:n?this.showTooltip:null,onMouseLeave:n?this.hideTooltip:null},a?this._onClickKeyDownToggleProps:{},{"data-test-id":t}),this.props.children,this.renderTooltipContent())}}g(f,"propTypes",{tooltipContent:u.a.node.isRequired,tooltipClassName:u.a.string,tooltipPosition:u.a.string,tooltipArrowClassName:u.a.string,className:u.a.string,onShow:u.a.func,interactionType:u.a.string,children:u.a.node,testId:u.a.string}),g(f,"defaultProps",{tooltipPosition:"bottom-right",interactionType:s.HOVER}),g(f,"contextTypes",{envInfo:u.a.instanceOf(a.a).isRequired})},491:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(49),s=r(47),n=r(29),i=r.n(n);class o extends s.a{constructor(e,t){super(a.a.SORT,i.a.recursive({target:e},t))}static create(e,t){return new o(e,t)}}},514:function(e,t,r){"use strict";function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}));class s{constructor(e,t,r){a(this,"id",void 0),a(this,"pluralId",void 0),a(this,"displayName",void 0),this.id=e,this.pluralId=t,this.displayName=r}}const n={AUTHOR:new s("author","authors","Authors"),COAUTHOR:new s("coAuthor","coAuthors","Co-Authors"),VENUE:new s("venue","venues","Venues"),FIELDS_OF_STUDY:new s("fieldOfStudy","fieldsOfStudy","Fields of Study")}},515:function(e,t,r){"use strict";var a=r(366),s=r(375),n=r(404),i=r(18),o=r(376),l=r(38),c=r(104),u=r(62),p=r(122),d=r(377),h=r(60),b=r(37),m=r(41),g=r(14);const f=e=>{let{paper:t}=e;const{dispatcher:r}=Object(p.d)(),a=g.useContext(d.a),n=g.useCallback(e=>{e.preventDefault(),r.dispatch(Object(c.b)({id:l.b.FEEDBACK}))},[r]);return g.useEffect(()=>{if(a){const e=h.a.getIn(a,"Tldr","DROPDOWN");Object(b.a)(new u.a(e,{corpusId:t.corpusId}))}},[a]),g.createElement("div",{className:"tldr-abstract__popover"},g.createElement("p",{className:"tldr-abstract__popover__description"},Object(m.c)(e=>e.tldr.tooltip.description)),g.createElement("hr",{className:"tldr-abstract__popover__line"}),g.createElement("p",{className:"tldr-abstract__popover__feedback"},Object(m.c)(e=>e.tldr.tooltip.feedback),g.createElement(s.default,{label:Object(m.c)(e=>e.tldr.tooltip.contactUsLink),onClick:n}),"."))};t.a=e=>{let{paper:t,query:r}=e;const s=Object(i.c)({query:r||"",text:t.tldr&&t.tldr.text||""});return g.createElement(g.Fragment,null,g.createElement(n.default,{className:"tldr-abstract__pill",contents:()=>g.createElement(f,{paper:t})},g.createElement(a.default,{className:"tldr-abstract-replacement__pill mod-clickable",label:Object(m.c)(e=>e.tldr.tldrLabel)})),g.createElement(o.c,{field:s,expandable:!1}))}},523:function(e,t,r){"use strict";var a=r(730),s=r(598),n=r(61);var i={constants:{BUBBLE_WIDTH:30,DESKTOP_HANDLE_WIDTH:20,DESKTOP_OVERLAP_PADDING:2,MOBILE_HANDLE_WIDTH:30,MOBILE_OVERLAP_PADDING:4},clamp:(e,t,r)=>Math.max(t,Math.min(r,e)),getHandlePosition:(e,t,r)=>t(e)-(r-t.bandwidth())/2,getScaleValForVal(e,t){let r=t(e);for(;isNaN(r);)r=t(e-=1);return e},getHighHandleLabel(e,t,r){let a=e+r-1;return e===t&&(a=r>1?e+"-"+(e+r-1):e),a.toString()},getBubbleWidth:(e,t)=>e>1?2*t:t,getHandleWidth(e){return e?this.constants.MOBILE_HANDLE_WIDTH:this.constants.DESKTOP_HANDLE_WIDTH},getOverlapPadding(e){return e?this.constants.MOBILE_OVERLAP_PADDING:this.constants.DESKTOP_OVERLAP_PADDING}},o=r(363),l=r.n(o),c=r(8),u=r.n(c),p=r(14),d=r.n(p),h=r(176),b=r.n(h);function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g extends p.PureComponent{constructor(){super(...arguments),m(this,"touchMove",e=>{const t=e.changedTouches[0].pageX-this.slidingParams.boundingRect.left;this.handleDragMove(t)}),m(this,"touchEnd",()=>{this.handleDragEnd()}),m(this,"mouseMove",e=>{if(this.state.sliding){const t=e.clientX-this.slidingParams.boundingRect.left;this.handleDragMove(t)}}),m(this,"mouseUp",e=>{0===e.button&&this.handleDragEnd(()=>{document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)})}),this.state={lowVal:this.props.lowVal||this.props.min,highVal:this.props.highVal||this.props.max,sliding:!1},this.slidingParams={boundingRect:null,otherVal:null,xScale:null}}componentWillReceiveProps(e){this.setState({lowVal:e.lowVal||e.min,highVal:e.highVal||e.max})}componentWillUnmount(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)}handleDragStart(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};t.preventDefault(),t.stopPropagation(),this.setState({sliding:!0},()=>{const t="highVal"===e?"lowVal":"highVal";this.slidingParams.xScale=s.a.xScale(this.props.min,this.props.max,this.props.step,this.props.width),this.slidingParams.boundingRect=b.a.findDOMNode(this).getBoundingClientRect(),this.slidingParams.otherVal=this.state[t],r()})}handleDragMove(e){const t=i.clamp(n.a(this.slidingParams.xScale,e),this.props.filteredMin||this.props.min,this.props.filteredMax||this.props.max),r=this.state.lowVal,a=this.state.highVal;this.setState({lowVal:Math.min(t,this.slidingParams.otherVal),highVal:Math.max(t+(this.props.step-1),this.slidingParams.otherVal)},()=>{!this.props.onSliderMove||this.state.lowVal===r&&this.state.highVal===a||this.props.onSliderMove(this.state.lowVal,this.state.highVal)})}handleDragEnd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.setState({sliding:!1},()=>{this.props.onSliderChange(this.state.lowVal,this.state.highVal),e()})}touchStart(e,t){this.handleDragStart(e,t)}mouseDown(e,t){0===t.button&&this.handleDragStart(e,t,()=>{document.addEventListener("mousemove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp)})}getSliderControlEventHandlers(e){return this.props.isMobile?{onTouchStart:this.touchStart.bind(this,e),onTouchEnd:this.touchEnd,onTouchMove:this.touchMove}:{onMouseDown:this.mouseDown.bind(this,e)}}render(){const e=this.props.isMobile,t=s.a.xScale(this.props.min,this.props.max,this.props.step,this.props.width),r=i.getScaleValForVal(this.state.lowVal,t),a=i.getScaleValForVal(this.state.highVal,t),n=i.getHandlePosition(r,t,i.getHandleWidth(e)),o=i.getHandlePosition(a,t,i.getHandleWidth(e)),c=i.getHandlePosition(this.props.min,t,i.getHandleWidth(e)),u=this.props.width-c,p=i.getHighHandleLabel(a,this.state.lowVal,this.props.step);let h=n,b=o;const m=h+i.getBubbleWidth(this.props.step,i.constants.BUBBLE_WIDTH)-b;n!==o&&m>0&&r!==a&&(h-=Math.round(m/i.getOverlapPadding(e)),b+=Math.round(m/i.getOverlapPadding(e)));const g=this.getSliderControlEventHandlers("lowVal"),f=this.getSliderControlEventHandlers("highVal");return d.a.createElement("div",{className:l()({slider:!0,sliding:this.state.sliding})},d.a.createElement("div",{className:"bar",style:{left:c,width:u}},d.a.createElement("div",{className:"selection",style:{left:n-c+i.getHandleWidth(e)/2,width:o-n}})),d.a.createElement("div",{className:"handle low",style:{left:n}},d.a.createElement("span",g)),d.a.createElement("div",{className:"handle high",style:{left:o}},d.a.createElement("span",f)),d.a.createElement("div",{className:"bubble value low",style:{left:h}},d.a.createElement("span",{"data-test-id":"slider-low-label"},r)),d.a.createElement("div",{className:"bubble value high",style:{left:b}},d.a.createElement("span",{"data-test-id":"slider-high-label"},p)))}}m(g,"propTypes",{min:u.a.number.isRequired,max:u.a.number.isRequired,step:u.a.number.isRequired,filteredMin:u.a.number,filteredMax:u.a.number,width:u.a.number.isRequired,lowVal:u.a.number.isRequired,highVal:u.a.number.isRequired,onSliderChange:u.a.func,onSliderMove:u.a.func,isMobile:u.a.bool.isRequired});var f=r(367),y=r(0);function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}const O=e=>{let{years:t,filteredYears:r,onRangeSelect:a,rangeBegin:s,rangeEnd:i,text:o,showCount:l,testId:c,isButton:u}=e;const p=function(e,t,r,a){return(t.isEmpty()?e:t).filter(e=>e.year>=r&&e.year<=a)}(t,r,s,i),h=function(e){return e.reduce((e,t)=>e+t.count,0)}(p),b=l&&!u?`${o} (${Object(n.d)(h)})`:o,m=d.a.useMemo(()=>Object(f.d)({onClick:()=>a(p.first().year,p.last().year)}),[p,a]);return h>0&&!p.isEmpty()?u?d.a.createElement("button",{className:"year-range-button button--secondary","data-test-id":c+"-filter-button",onClick:()=>a(p.first().year,p.last().year)},b):d.a.createElement("span",v({className:"year-range-preset clickable","data-test-id":c+"-filter-link"},m),b):u?d.a.createElement("button",{className:"year-range-button button--secondary disabled"},b):d.a.createElement("span",{className:"year-range-preset"},b)};O.propTypes={years:u.a.instanceOf(y.a).isRequired,filteredYears:u.a.instanceOf(y.a).isRequired,onRangeSelect:u.a.func.isRequired,rangeBegin:u.a.number.isRequired,rangeEnd:u.a.number.isRequired,showCount:u.a.bool,text:u.a.string.isRequired,testId:u.a.string.isRequired,isButton:u.a.bool},O.defaultProps={showCount:!0};var P=O,E=r(41),w=r(432);function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}const x=e=>{let{years:t,filteredYears:r,onRangeSelect:a,showCounts:s,isButton:n}=e;const i=new Date,o=i.getUTCFullYear(),l=i.getUTCMonth()>6?o:o-1,c=o-5,u=o-10;return d.a.createElement("ul",T({className:"year-range-presets"+(n?" buttons":"")},Object(w.e)()),d.a.createElement("li",null,d.a.createElement(P,{years:t,filteredYears:r,onRangeSelect:a,rangeBegin:l,rangeEnd:o,showCount:s,text:Object(E.c)(e=>e.serp.histogram.button.thisYear.title),testId:"this-year",isButton:n})),d.a.createElement("li",null,d.a.createElement(P,{years:t,filteredYears:r,onRangeSelect:a,rangeBegin:c,rangeEnd:o,showCount:s,text:Object(E.c)(e=>e.serp.histogram.button.lastFive.title),testId:"last-five-years",isButton:n})),d.a.createElement("li",null,d.a.createElement(P,{years:t,filteredYears:r,onRangeSelect:a,rangeBegin:u,rangeEnd:o,showCount:s,text:Object(E.c)(e=>e.serp.histogram.button.lastTen.title),testId:"last-ten-years",isButton:n})))};x.defaultProps={showCounts:!0,isButton:!1};var C=x,S=r(374),N=r(60),_=r(37),j=r(114);function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){let{years:t,filteredYears:r}=e;const a=!r.isEmpty(),n=[{buckets:t,renderer:a?s.a.bucketRenderers.unfilteredBuckets:s.a.bucketRenderers.selectedBuckets}];return a&&n.push({buckets:r,renderer:s.a.bucketRenderers.selectedBuckets}),n}class D extends p.PureComponent{constructor(){super(...arguments),k(this,"onYearFilterChange",(e,t)=>{Object(_.a)(S.a.create(this.props.analyticsEvent,{minYear:e,maxYear:t})),this.props.filterCallback(e,t)}),k(this,"onYearFilterMove",(e,t)=>{this.setState({yearSliderLowVal:e,yearSliderHighVal:t})}),k(this,"onYearBucketSelect",e=>{const t=this.getYearStats(this.props);(!t.filteredMin||e.startKey>=t.filteredMin)&&(!t.filteredMax||e.endKey<=t.filteredMax)&&(Object(_.a)(S.a.create(N.a.Serp.YEAR_BUCKET,{minYear:e.startKey,maxYear:e.endKey})),this.props.filterCallback(e.startKey,e.endKey))}),k(this,"filterPopoverCount",e=>{const t=this.getYearStats(this.props),r=t.filteredYears||e.selectedStartYear<(t.selectedStartYear||t.min)||e.selectedEndYear>(t.selectedEndYear||t.max)||new y.a,a=r.find(t=>t.startKey===e.startKey),s=a&&a.count||0;return r?s:e.count}),this.state=this.getInitialYearFilterState(this.props)}getYearStats(e){const t=e.yearBuckets?e.yearBuckets:e.years;if(t&&t.size>1){const r=Object(j.b)(t,1),a=Object(j.b)(e.filteredYears,1,r.first().startKey),s=a.isEmpty()?null:a.first().startKey,n=a.isEmpty()?null:a.last().endKey,i=r.first().startKey,o=r.last().endKey,l=e.yearFilter.get("min"),c=e.yearFilter.get("max");return{years:r,filteredYears:a,min:i,max:o,filteredMin:s,filteredMax:n,selectedStartYear:l>o?i:Math.max(i,l),selectedEndYear:c<i?o:Math.min(o,c),step:1}}return null}getInitialYearFilterState(e){const t={yearSliderHighVal:null,yearSliderLowVal:null},r=this.getYearStats(e);return r&&(t.yearSliderLowVal=Math.max(r.selectedStartYear||r.min,r.filteredMin||Number.MIN_VALUE),t.yearSliderHighVal=Math.min(r.selectedEndYear||r.max,r.filteredMax||Number.MAX_VALUE)),t}componentWillReceiveProps(e){this.setState(this.getInitialYearFilterState(e))}renderHistogram(e){return p.createElement(s.a,{id:"filters",width:this.props.histogramWidth,height:this.props.histogramHeight,useLogScale:!0,bucketRenderers:R(e),renderPopover:!0,onBucketClick:this.onYearBucketSelect,filterPopoverCount:this.filterPopoverCount,minSelected:this.state.yearSliderLowVal,maxSelected:this.state.yearSliderHighVal,paddingBottomPx:this.props.renderXAxis?s.a.DefaultPaddingPx.BOTTOM:0,renderAxis:this.props.renderXAxis,showOnlyFirstAndLastXAxisValues:this.props.renderXAxis,popoverLabel:this.props.popoverLabel,centerBucketPopover:this.props.centerBucketPopover})}render(){const e=this.getYearStats(this.props),{wrapperClass:t}=this.props;if(e){const r=p.createElement("div",{className:l()("year-filter__histogram",t)},this.renderHistogram(e),p.createElement(g,{onSliderChange:this.onYearFilterChange,onSliderMove:this.onYearFilterMove,width:this.props.histogramWidth,min:e.min,max:e.max,step:e.step,filteredMin:e.filteredMin,filteredMax:e.filteredMax,lowVal:this.state.yearSliderLowVal,highVal:this.state.yearSliderHighVal,isMobile:this.props.isMobile}),this.props.showPresets&&!this.props.showPresetButtons?p.createElement(C,{years:this.props.years,filteredYears:this.props.filteredYears,onRangeSelect:this.onYearFilterChange,showCounts:this.props.showPresetFilterCounts}):null,this.props.showPresetButtons?p.createElement(C,{years:this.props.years,filteredYears:this.props.filteredYears,onRangeSelect:this.onYearFilterChange,isButton:!0}):null);return this.props.renderInFacetContainer?p.createElement(a.a,{title:"Publication Year",testId:"years",openByDefault:!0,collapsible:this.props.collapsible,facets:e.years},r):r}return null}}k(D,"propTypes",{analyticsEvent:u.a.string.isRequired,centerBucketPopover:u.a.bool,years:u.a.instanceOf(y.a).isRequired,filteredYears:u.a.instanceOf(y.a).isRequired,isMobile:u.a.bool.isRequired,filterCallback:u.a.func.isRequired,histogramWidth:u.a.number.isRequired,histogramHeight:u.a.number.isRequired,renderInFacetContainer:u.a.bool,showPresets:u.a.bool,showPresetFilterCounts:u.a.bool,renderXAxis:u.a.bool,collapsible:u.a.bool,yearBuckets:u.a.instanceOf(y.a),yearFilter:u.a.object,popoverLabel:u.a.string,wrapperClass:u.a.string,showPresetButtons:u.a.bool}),k(D,"defaultProps",{renderInFacetContainer:!0,showPresets:!0,showPresetFilterCounts:!0,renderXAxis:!1,collapsible:!0});var L=r(125);function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return I}));class I extends p.PureComponent{render(){const{analyticsEvent:e,centerBucketPopover:t,filters:r,filterCallback:a,histogramWidth:s,histogramHeight:n,yearBuckets:i,yearFilter:o,popoverLabel:l,wrapperClass:c}=this.props,u=i||r.get("years");return p.createElement(D,{analyticsEvent:e,centerBucketPopover:t,years:u,filterCallback:a,filteredYears:r.get("filteredYears")||new y.b.List,isMobile:this.context.envInfo.isMobile,histogramWidth:s,histogramHeight:n,renderXAxis:!1,showPresets:!1,renderInFacetContainer:!1,yearBuckets:i,yearFilter:o,popoverLabel:l,wrapperClass:c,showPresetButtons:this.props.showPresetButtons})}}V(I,"contextTypes",{envInfo:u.a.instanceOf(L.a).isRequired}),V(I,"defaultProps",{histogramHeight:50,histogramWidth:300})},524:function(e,t,r){"use strict";var a=r(730),s=r(364),n=r(367),i=r(378),o=r(363),l=r.n(o),c=r(8),u=r.n(c),p=r(14),d=r.n(p);function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}class b extends p.PureComponent{constructor(){var e,t,r;super(...arguments),e=this,t="_onClickKeyDownProps",r=Object(n.d)({onClick:this.props.onChange,overrideKeys:[i.g]}),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}static propTypes(){return{children:u.a.element,selected:u.a.bool,disabled:u.a.bool,label:u.a.string,labelElement:u.a.element,onChange:u.a.func}}render(){const e=l()("flex-row-vcenter checkbox",{"is-selected":this.props.selected,"is-disabled":this.props.disabled}),t=this.props.labelElement?this.props.labelElement:d.a.createElement("label",{className:"checkbox-label"},this.props.label);return d.a.createElement("div",h({className:e,tabIndex:"0",role:"checkbox","aria-checked":this.props.selected,"aria-labelledby":"checkbox-"+t},this.props.disabled?{}:this._onClickKeyDownProps),d.a.createElement("div",{className:"checkbox-input flex-row-vcenter"},d.a.createElement(s.a,{className:"check flex-centered",icon:"check",width:"12",height:"12"})),d.a.createElement("span",{id:"checkbox-"+t},t),this.props.children)}}var m=r(132);function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class f extends p.PureComponent{constructor(){super(...arguments),g(this,"toggleFacet",()=>{const{onFilterToggled:e,filterType:t,value:r,documentCount:a,index:s}=this.props,{router:n}=this.context,i=this.getQueryStore();"function"==typeof e&&e(this.state.selected,r,a,s),i.routeToToggleFilter(t,r,n)}),this.state=this.stateFromQueryStore();this.getQueryStore().registerComponent(this,()=>{this.setState(this.stateFromQueryStore())})}getQueryStore(){return this.props.injectQueryStore||this.context.queryStore}stateFromQueryStore(){const{filterType:e,value:t,orMode:r}=this.props,a=this.getQueryStore(),s=0===a.getFilterDocumentCount(e,t),n=a.isFilterActive(e,t);return{disabled:s&&!n&&!r,selected:n}}render(){return d.a.createElement(b,{onChange:this.toggleFacet,label:this.props.label,labelElement:this.props.labelElement,selected:this.state.selected,disabled:this.state.disabled},this.props.children)}}g(f,"propTypes",{filterType:u.a.string.isRequired,orMode:u.a.bool,injectQueryStore:u.a.object,documentCount:u.a.number,value:u.a.string.isRequired,label:u.a.string,labelElement:u.a.element,index:u.a.number,onFilterToggled:u.a.func,children:u.a.object}),g(f,"contextTypes",{queryStore:u.a.instanceOf(m.a).isRequired,router:u.a.object.isRequired});var y=r(474),v=r(109),O=r(60),P=r(47);class E extends P.a{constructor(e,t,r,a,s){const n=s?"disable":"enable";super(O.a.FACET,{action:n,facetType:e,facetValue:t,documentCount:r,index:a})}static create(e,t,r,a,s){return new E(e,t,r,a,s)}}class w extends P.a{constructor(e,t){super(O.a.FACET,{value:e,count:t})}static create(e,t){return new w(e,t)}}var T=r(61),x=r(37),C=r(432);function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return N}));class N extends d.a.PureComponent{constructor(){super(...arguments),S(this,"handleFilterToggle",(e,t,r,a)=>{Object(x.a)(E.create(this.props.filterType,t,r,a,e))}),S(this,"renderFilter",(e,t)=>{const{displayDocCount:r,filterType:a,hasSelection:s,injectQueryStore:n,maxLabelLength:i}=this.props,o=this.getQueryStore().isFilterActive(a,e.value),l=e.displayValue||e.value,c=e.documentCount,u=c>10?10*Math.floor((c+1)/10):c,p=s&&!o,h=!p&&r,b=i&&-1!==i?Object(T.m)(l,i):l,m=h?Object(T.h)(b,u):b,g=b===l?d.a.createElement("span",null,m):d.a.createElement(y.a,{tooltipClassName:"tooltip--default-size filter-list_facet-tooltip",tooltipContent:l,tooltipPosition:"bottom-left"},m),v=d.a.createElement("label",{className:"checkbox-label"},g);return d.a.createElement("li",{"data-test-id":"facet-row-"+t,className:"facet-value",key:e.value},d.a.createElement(f,{injectQueryStore:n,onFilterToggled:this.handleFilterToggle,documentCount:c,filterType:a,value:e.value,orMode:p,labelElement:v,index:t}))});const e=this.getQueryStore(),t=void 0!==this.props.filters.find(t=>e.isFilterActive(this.props.filterType,t.value));this.state={openByDefault:t}}getQueryStore(){return this.props.injectQueryStore||this.context.queryStore}componentDidMount(){const{filterType:e,filters:t}=this.props,r=t.size;Object(x.a)(w.create(e,r))}render(){const{filterType:e,filters:t,title:r}=this.props,s=Object(v.c)(t),n=t.toList().map(this.renderFilter);return d.a.createElement(a.a,{title:r,testId:e,heapProps:Object(C.c)(e),isActive:s>0,facets:t,openByDefault:this.state.openByDefault,collapsible:!!this.props.collapsible},d.a.createElement("ul",{className:"facet-list"},n))}}S(N,"contextTypes",{queryStore:u.a.instanceOf(m.a).isRequired}),S(N,"defaultProps",{collapsible:!0,maxLabelLength:-1,displayDocCount:!0})},526:function(e,t,r){"use strict";var a=r(364),s=r(367),n=r(378),i=r(8),o=r.n(i),l=r(14),c=r.n(l);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}const{bool:p,number:d,string:h}=o.a,b={enabled:p.isRequired,count:d.isRequired,icon:h,onClick:o.a.func.isRequired,ariaLabelledBy:h},m=(e,t)=>`flex-row-vcenter checkbox ${e?"is-selected":""} ${0===t?"is-disabled":""}`,g=e=>{let{enabled:t,count:r,icon:i,onClick:o,ariaLabelledBy:l}=e;const p=c.a.useMemo(()=>Object(s.d)({onClick:o,overrideKeys:[n.g]}),[o]);return c.a.createElement("div",{className:m(t,r)},c.a.createElement("div",u({className:"checkbox-input flex-row-vcenter "+i,"data-test-id":"facet-checkbox"},p,{tabIndex:"0",role:"checkbox","aria-labelledby":l,"aria-checked":t}),c.a.createElement(a.a,{className:"check flex-centered",icon:i,width:"12",height:"12"})))};g.propTypes=b,g.defaultProps={icon:"check"};var f=g,y=r(61),v=r(363),O=r.n(v);const P={facetValue:o.a.object.isRequired,isSelected:o.a.bool.isRequired,handleClick:o.a.func.isRequired,checkBoxIcon:o.a.string.isRequired,index:o.a.number.isRequired,displayCount:o.a.bool.isRequired},E=e=>{const{handleClick:t,isSelected:r,index:a,facetValue:s,checkBoxIcon:n,displayCount:i}=e,{value:o,documentCount:l}=s,u=O()("flex-row-vcenter checkbox facet-value",{"is-disabled":0===l,"is-selected":r}),p=i?Object(y.h)(o,l):o;return c.a.createElement("li",{className:u,"data-test-id":"facet-row-"+a},c.a.createElement(f,{enabled:r,count:l,icon:n,onClick:l>0?()=>t(o,r,l,a):void 0,ariaLabelledBy:"checkbox-"+p}),c.a.createElement("span",{id:"checkbox-"+p,className:"checkbox-label"},p))};E.propTypes=P,E.defaultProps={checkBoxIcon:"check",displayCount:!0};var w=E,T=r(397);function x(){return(x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var C=e=>{let{className:t,isSelected:r,isDisabled:a,text:s,testId:n,heapProps:i,onToggle:o}=e;const l=O()("fresh-filters__filter_container toggle",r?"selected":"unselected",t),u=O()("button",{"is-selected":r,"button--primary":r,"button--secondary":!r,"is-disabled":a});return c.a.createElement(T.a,{className:l},c.a.createElement("button",x({"aria-pressed":r,onClick:o,className:u,disabled:a,"data-test-id":n+"-filter-button"},i),s))},S=r(374),N=r(60),_=r(109),j=r(15),k=r(132),R=r(80),D=r(37),L=r(432);function V(){return(V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return F}));class F extends c.a.PureComponent{constructor(){super(...arguments),A(this,"toggleHasPdfFilter",()=>{const e=this.getQueryStore();Object(D.a)(S.a.create(N.a.FACET_HAS_PDF,{documentCount:this.state.countOfPapersWithViewablePdf,action:this.state.isSelected?"disable":"enable"})),j.a.changeRouteForPartialQuery(e.getIndependentQuery(),e.getQuery().set("requireViewablePdf",!this.state.isSelected),this.context.history,this.context.router)});const e=this.getQueryStore();this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromQueryStore()),e.registerComponent(this,()=>{this.setState(this.getStateFromQueryStore())})}getQueryStore(){return this.props.injectQueryStore||this.context.queryStore}getStateFromQueryStore(){const e=this.getQueryStore(),t=e.getQuery().requireViewablePdf||!1;let r=null;r=this.props.forCitations?e.getAggregationResponse().stats:e.getQueryResponse().stats;return{isSelected:t,countOfPapersWithViewablePdf:r.get("countOfPapersWithViewablePdf")||0}}renderAsToggle(){const{className:e,disabled:t}=this.props,{isSelected:r,countOfPapersWithViewablePdf:a}=this.state;return c.a.createElement(C,{className:e,isSelected:r,isDisabled:0===a||!!t,text:"Has PDF",testId:"pdf-available",heapProps:Object(L.a)(),onToggle:this.toggleHasPdfFilter})}renderAsFacet(){const{className:e}=this.props,{isSelected:t,countOfPapersWithViewablePdf:r}=this.state,a=Object(_.a)({value:"Full text PDF available",documentCount:r});return c.a.createElement("ul",V({className:O()("facet-content","facet-content--without-container",e)},Object(L.b)()),c.a.createElement(w,{handleClick:this.toggleHasPdfFilter,index:0,facetValue:a,isSelected:t}))}render(){return this.props.isToggle?this.renderAsToggle():this.renderAsFacet()}}A(F,"propTypes",{className:o.a.string,isToggle:o.a.bool,injectQueryStore:o.a.object,disabled:o.a.bool,forCitations:o.a.bool}),A(F,"contextTypes",{history:o.a.instanceOf(R.a).isRequired,queryStore:o.a.instanceOf(k.a).isRequired,router:o.a.object.isRequired})},730:function(e,t,r){"use strict";var a=r(364),s=r(363),n=r.n(s),i=r(8),o=r.n(i),l=r(14),c=r.n(l);const u=e=>{let{isOpen:t}=e;const r=n()("facet-toggle__icon",{open:t});return c.a.createElement("div",{className:r},c.a.createElement(a.a,{icon:"disclosure",width:"14",height:"14"}))};u.propTypes={isOpen:o.a.bool.isRequired};var p=u,d=r(60),h=r(47);class b extends h.a{constructor(e,t,r){const a=r?"expand":"collapse";super(d.a.FACET_CONTAINER,{title:e,facets:t,action:a})}static create(e,t,r){return new b(e,t,r)}}var m=r(37),g=r(124),f=r(367),y=r(370);function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class P extends c.a.PureComponent{constructor(){super(...arguments),O(this,"handleContainerToggle",()=>{this.setState({isOpen:!this.state.isOpen},()=>{const{title:e,facets:t}=this.props,r="Publication Year"!==e?JSON.stringify(t.map(e=>{let{value:t,documentCount:r}=e;return{value:t,documentCount:r}})):void 0;Object(m.a)(b.create(e,r,this.state.isOpen))})}),O(this,"_onClickKeyDownProps",Object(f.d)({onClick:this.handleContainerToggle})),this.state={isOpen:this.props.openByDefault||!1}}render(){const{isOpen:e}=this.state,{testId:t,hideTitle:r,heapProps:a}=this.props,s=c.a.createElement("div",{className:"facet-content"},this.props.children),i=n()("flex-row-vcenter flex-space-between facet-toggle",{"is-inactive":!this.props.isActive});return c.a.createElement("section",v({"data-test-id":t},a?Object(y.a)(a):{}),c.a.createElement("div",v({className:i},this.props.collapsible?this._onClickKeyDownProps:{}),!r&&c.a.createElement("h3",{className:"facet-content__header"},this.props.title),this.props.collapsible?c.a.createElement(p,{isOpen:e}):null),this.props.collapsible?e&&s:s)}}O(P,"contextTypes",{dispatcher:o.a.instanceOf(g.a).isRequired}),O(P,"defaultProps",{isActive:!0,openByDefault:!1,collapsible:!0,hideTitle:!1});t.a=P}}]);
//# sourceMappingURL=bundle-1.js.map