(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{593:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var a=r(123),s=r(374),n=r(60),o=r(42),i=r(62),c=r(37),l=r(594),u=r(363),h=r.n(u),p=r(8),m=r.n(p),d=r(14);function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y extends d.Component{constructor(){super(...arguments),f(this,"_resizeObserver",void 0),f(this,"handleResize",e=>{const t=e[0].contentRect.width,r=this.authorCards.current.querySelectorAll("."+l.a);this.firstNewContent.current=t<=500?r.item(1):t<=760&&t>500?r.item(2):null}),f(this,"toggleDisplayLimit",()=>{this.setState(e=>{const t=3===e.limit?this.props.authors.size:3;return Object(c.a)(s.a.create(n.a.Serp.MATCHED_AUTHOR_LIST_TOGGLE,{more:t===this.props.authors.size})),{limit:t}})}),this.state={limit:3},this.authorCards=d.createRef(),this.firstNewContent=d.createRef()}componentDidMount(){Object(c.a)(i.a.create(n.a.Serp.MATCHED_AUTHOR_LIST,{count:this.props.authors.size,authorIds:JSON.stringify(this.props.authors.map(e=>e.id))})),this._resizeObserver=new ResizeObserver(this.handleResize);const e=Object(o.b)(document);this._resizeObserver.observe(e)}componentWillUnmount(){const e=Object(o.b)(document);this._resizeObserver.unobserve(e)}componentDidUpdate(e,t){if(t.limit!==this.state.limit&&this.state.limit===this.props.authors.size)if(this.firstNewContent&&this.firstNewContent.current)this.firstNewContent.current.focus();else{this.authorCards.current.querySelectorAll("."+l.a).item(3).focus()}}render(){const e=this.props.authors.take(this.state.limit),t=this.props.authors.size>3,r=this.state.limit==this.props.authors.size,a=h()("flex-container","flex-wrap","matched-author-shoveler__list",{"matched-author-shoveler__list__short":!r,"matched-author-shoveler__list__full":r});return d.createElement("div",{className:"matched-author-shoveler"},d.createElement("ul",{ref:this.authorCards,className:a},e.map((e,t)=>d.createElement("li",{key:`matched-author-${e.id}-${t}`,className:"matched-author-shoveler__list-item matched-author-shoveler__list-item-"+t},d.createElement(l.b,{author:e,index:t})))),t?d.createElement("button",{"aria-expanded":r,onClick:this.toggleDisplayLimit,className:"matched-author-shoveler-toggle link-button","data-test-id":"matched-author-shoveler-toggle"},this.props.authors.size>this.state.limit?"Show All Authors":"Hide Authors"):null)}}f(y,"contextTypes",{api:m.a.instanceOf(a.a).isRequired})},594:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return m}));var a=r(402),s=r(364),n=r(365),o=r(374),i=r(60),c=r(41),l=r(37),u=r(122),h=r(14);const p="matched-author-shoveler__author-link";function m(t){const{api:r}=Object(u.d)(),[c,m]=h.useState(null);return h.useEffect(()=>{e((async function(){const e=await r.fetchAuthorStatsByAuthorId(t.author.id);m(e.resultData)}))},[t.author.id]),h.createElement(a.default,{className:"matched-author-shoveler__card",key:t.author.toString()},h.createElement("div",{className:"matched-author-shoveler__author-icon"},h.createElement(s.a,{icon:"user",width:"30",height:"30"})),h.createElement("ul",{className:"matched-author-shoveler__content"},h.createElement("li",null,h.createElement(n.a,{to:"AUTHOR_PROFILE",params:{authorId:t.author.id,slug:t.author.slug},onClick:()=>{Object(l.a)(o.a.create(i.a.Serp.MATCHED_AUTHOR,{authorId:t.author.id,index:t.index}))},className:p,"data-test-id":"matched-author-link",enableVisitedStyle:!0},h.createElement("span",{className:"matched-author-shoveler__author-title","data-test-id":"matched-author-link-name"},t.author.name))),h.createElement(d,{stats:c})))}const d=e=>{let{stats:t}=e;return t?h.createElement("li",{className:"matched-author-shoveler__metadata"},h.createElement("span",{className:"matched-author-shoveler__metadata__item"},Object(c.a)(e=>e.serp.matchedAuthor.stats.publications,t.totalPaperCount)),t.totalCitationCount>0?h.createElement("span",{className:"matched-author-shoveler__metadata__item"},Object(c.a)(e=>e.serp.matchedAuthor.stats.citations,t.totalCitationCount)):null,t.fieldsOfStudy.length>0?h.createElement("span",{className:"matched-author-shoveler__metadata__item"},t.fieldsOfStudy[0]):null):h.createElement("li",{className:"matched-author-shoveler__metadata"},h.createElement("span",{className:"matched-author-shoveler__metadata__placeholder matched-author-shoveler__metadata__placeholder-short"}," "),h.createElement("span",{className:"matched-author-shoveler__metadata__placeholder matched-author-shoveler__metadata__placeholder-long"}," "),h.createElement("span",{className:"matched-author-shoveler__metadata__placeholder matched-author-shoveler__metadata__placeholder-long"}," "))}}).call(this,r(595).setImmediate)},595:function(e,t,r){(function(e){var a=void 0!==e&&e||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function n(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new n(s.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new n(s.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(596),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(107))},596:function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var a,s,n,o,i,c=1,l={},u=!1,h=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?a=function(e){t.nextTick((function(){d(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((n=new MessageChannel).port1.onmessage=function(e){d(e.data)},a=function(e){n.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(s=h.documentElement,a=function(e){var t=h.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):a=function(e){setTimeout(d,0,e)}:(o="setImmediate$"+Math.random()+"$",i=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&d(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),a=function(t){e.postMessage(o+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var s={callback:e,args:t};return l[c]=s,a(c),c++},p.clearImmediate=m}function m(e){delete l[e]}function d(e){if(u)setTimeout(d,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{m(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(107),r(333))},597:function(e,t,r){"use strict";var a=r(15),s=r(365),n=r(8),o=r.n(n),i=r(14),c=r.n(i);const l=e=>{let{originalQuery:t,modifiedQuery:r}=e;return c.a.createElement("div",{className:"modified-query-notification"},c.a.createElement("p",{className:"original"},"Sorry, we couldn't find any papers about ",t,"."),c.a.createElement("p",null,"Results for ",c.a.createElement(s.a,a.a.routeForQuery(r),r)," ","(without quotes):"))};l.propTypes={originalQuery:o.a.string.isRequired,modifiedQuery:o.a.string.isRequired},t.a=l},855:function(e,t,r){"use strict";r.r(t);var a=r(422),s=r(372),n=r(371),o=r(132),i=r(11),c=r(383),l=r(373),u=r(403),h=r(431),p=r(406),m=r(427),d=r(393),f=r(605),y=r(582),b=r(394),g=r(397),O=r(593),_=r(597),v=r(464),E=r(444),S=r(42),w=r(60),j=r(35),C=r(443),N=r(62),P=r(27),T=r(66),I=r(37),k=r(127),q=r(122),R=r(9),F=r(87),x=r(363),D=r.n(x),L=r(0),A=r(8),Q=r.n(A),z=r(14),M=r(176),U=r.n(M);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const W=z.createContext({isFirstFeedLink:!1});class $ extends z.PureComponent{constructor(){super(...arguments),Y(this,"trackClick",(e,t)=>{let{paper:r,eventData:a,compData:s}=e;const{analyticsLocation:n,queryStore:o}=this.context,i=Object(T.a)(o,{paperSha:r.id,paperIndex:a.index});switch(t){case 1:Object(T.c)(H({},i,{authorId:parseInt(s.authorId||"")})),Object(l.d)({paper:r,analyticsLocation:n,eventData:a,compData:s});break;case 2:Object(T.d)(i),Object(l.e)({paper:r,analyticsLocation:n,eventData:a,compData:s});break;case 3:Object(T.e)(i),Object(l.f)({paper:r,analyticsLocation:n,compData:s,eventData:a});break;case 4:Object(T.f)(H({},i,{linkType:s.linkType,linkUrl:s.linkUrl})),Object(l.h)({paper:r,analyticsLocation:n,compData:s,eventData:a});break;case 5:Object(T.g)(i),Object(l.g)({paper:r,analyticsLocation:n,eventData:a,compData:s});break;default:R.a.warn(`Invalid: ClickType ${t} is not associated with a tracking call.`)}}),Y(this,"loadPage",e=>{if(e!==this.props.query.page){const t=U.a.findDOMNode(this);t instanceof HTMLElement&&S.a.scrollTop(this.props.layoutOptions.scrollToTopOfPage?0:S.a.offsetFromBody(t)),this.context.queryStore.routeToPage(e,this.context.router)}}),Y(this,"onChangeSort",e=>{const{queryStore:t,router:r}=this.context;this.setState({showInfluentialCounts:e===P.a.INFLUENTIAL_CITATIONS.id}),t.routeToSort(e,r)}),Y(this,"onChangeYearFilter",(e,t)=>{const{queryStore:r,router:a}=this.context;r.routeToYearRange(e,t,a)});const e=this.props.query.sort;this.state={showInfluentialCounts:e===P.a.INFLUENTIAL_CITATIONS.id}}componentDidMount(){const{isCompact:e}=this.props;e?Object(I.a)(N.a.create(w.a.Serp.DENSE_PAPER_VIEW)):Object(I.a)(N.a.create(w.a.Serp.NORMAL_PAPER_VIEW))}componentDidUpdate(e){if(!L.b.is(e.response,this.props.response)&&!this.props.response.results.isEmpty()){const e=S.a.scrollTop(),t=this.refs["search-result-"+(this.props.response.results.size-1)];if(t){const r=S.a.offsetFromBody(t);r<e&&S.a.scrollTop(r-20)}}}buildResultNodes(e){const{isCompact:t,query:r,isPaperRowV2FontOnly:a}=this.props,{showInfluentialCounts:s}=this.state,n=D()("serp-papers__paper-row",{"paper-row-dense":t,"paper-row-normal":!t,"paper-v2-font-only":a});return e.map((e,a)=>z.createElement(W.Provider,{key:e.id,value:{isFirstFeedLink:0===a}},z.createElement(l.c,{key:e.id,paper:e,eventData:{index:(r.page-1)*r.pageSize+a},onClickAuthor:e=>{this.trackClick(e,1)},onClickCite:e=>{this.trackClick(e,2)},onClickLibrary:e=>{this.trackClick(e,3)},onClickViewPaper:e=>{this.trackClick(e,4)},onClickTitle:e=>{this.trackClick(e,5)},onHoverStats:!0},z.createElement(p.default,{paper:e,className:n,controls:z.createElement(u.default,{paper:e,stats:z.createElement(m.default,{paper:e,hic:s})}),abstract:!t&&z.createElement(E.b,{paper:e,query:r.queryString}),meta:z.createElement(h.default,{paper:e,authors:!0}),title:z.createElement(d.default,{paper:e,titleTagName:"h2"})}))))}renderResults(){const{response:{results:e}}=this.props;return this.buildResultNodes(e)}renderNoResults(){var e;const{querySuggestions:t}=this.props.response,r=!(t&&!t.isEmpty())||null===(e=t.first())||void 0===e?void 0:e.text;return z.createElement(y.a,{query:this.props.query.queryString,hasFacets:Object(F.c)(this.props.response),suggestedQuery:r})}renderFreshSerpContent(){const{response:e,isFiltering:t,layoutOptions:r,query:a}=this.props,{matchedAuthors:s,totalPages:n,modifiedQueryString:o}=e;return z.createElement("div",{className:D()("fresh-serp","fresh-serp-column")},z.createElement(f.a,{className:"dropdown-filters-breakpoints__serp",config:C.d,injectQueryStore:this.context.queryStore,onChangeYearFilter:this.onChangeYearFilter,showResultCount:!0,doFullQueryReset:!1,isSearchbarFocused:!1,query:a,response:e,sortControl:z.createElement(v.a,{className:"dropdown-filters__sort-control",onChangeSort:this.onChangeSort,options:r.sorts,sort:a.sort})}),z.createElement(b.a,{layoutMed:"column-reverse",className:"centered-max-width-content",role:"main",id:"main-content"},z.createElement(g.a,{width:"66",className:"flex-item__left-column",testId:"results"},s.isEmpty()?null:z.createElement(O.a,{queryString:a.queryString,authors:s}),o?z.createElement(_.a,{originalQuery:e.query.queryString,modifiedQuery:o}):null,z.createElement("div",{className:D()("result-page",{"is-filtering":t}),"data-test-id":"result-page","data-selenium-is-filtering":t||void 0},this.renderResults()),z.createElement(c.default,{className:"flex-right",onPaginate:this.loadPage,pageNumber:a.page,totalPages:n,"data-test-id":"result-page-pagination"})),z.createElement(g.a,{width:"33",className:"flex-item__right-column"})))}renderFreshSerpNoResults(){const{isFiltering:e}=this.props;return z.createElement("div",{className:"fresh-serp"},z.createElement(b.a,{className:"centered-max-width-content",role:"main",id:"main-content"},z.createElement(g.a,{width:"66",className:"flex-item__left-column"},z.createElement("div",{className:D()("result-page",{"is-filtering":e})},this.renderNoResults()))))}render(){return this.props.response.results.isEmpty()?this.renderFreshSerpNoResults():this.renderFreshSerpContent()}}Y($,"contextTypes",{analyticsLocation:Q.a.object,queryStore:Q.a.instanceOf(o.a).isRequired,router:Q.a.object.isRequired,weblabStore:Q.a.instanceOf(k.b).isRequired});var B=Object(q.c)($,e=>H({},Object(q.e)(e.weblabStore,e=>({isPaperRowV2FontOnly:e.isVariationEnabled(j.b.PaperRowV2FontOnly.KEY,j.b.PaperRowV2FontOnly.Variation.PAPER_ROW_V2_FONT_ONLY)})))),G=r(74);function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Z extends z.PureComponent{constructor(){super(...arguments),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.stateFromQueryStore(),{},this.stateFromUserPreferencesStore()),this.context.queryStore.registerComponent(this,()=>{this.setState(this.stateFromQueryStore())}),this.context.userPrefsStore.registerComponent(this,()=>{this.setState(this.stateFromUserPreferencesStore())})}stateFromQueryStore(){return{queryStoreState:this.context.queryStore._state,query:this.context.queryStore._query,response:this.context.queryStore._response}}stateFromUserPreferencesStore(){return{isCompact:!!this.context.userPrefsStore.getLocalPreference(G.a.DENSE_PAPER_VIEW)}}render(){const{queryStoreState:e,query:t,response:r,isCompact:a}=this.state;return e===i.a.LOADING||e===i.a.INITIALIZED?z.createElement("section",{className:"content",role:"main",id:"main-content"},z.createElement("div",{className:"container loading-controls flex-row-vcenter"},z.createElement(n.a,{testId:"icon-loading-serp"})," Loading results")):z.createElement(B,{isCompact:a,query:t,response:r,layoutOptions:this.props.layoutOptions,isFiltering:e===i.a.FILTERING})}}K(Z,"contextTypes",{queryStore:Q.a.instanceOf(o.a).isRequired,userPrefsStore:Q.a.instanceOf(G.b).isRequired,weblabStore:Q.a.instanceOf(k.b).isRequired});var X=r(130),ee=r(123),te=r(126),re=r(584),ae=r(377);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"default",(function(){return ce}));const oe=Object(ae.b)(w.a.Serp)(a.a),ie=Object(ae.b)(w.a.Serp)(Z);class ce extends z.Component{constructor(){super(...arguments),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.stateFromQueryStore()),this.context.queryStore.registerComponent(this,()=>{this.setState(this.stateFromQueryStore())})}stateFromQueryStore(){return{isLoading:this.context.queryStore.isLoading()}}render(){const{isLoading:e}=this.state,t=new re.a;return z.createElement(s.a,{className:"search",header:z.createElement(oe,{showSearchBar:!0,submitSearchOnFieldOfStudyChange:!0}),footer:!e},z.createElement(ie,{layoutOptions:t}))}}ne(ce,"contextTypes",{alertsStore:Q.a.instanceOf(X.a).isRequired,api:Q.a.instanceOf(ee.a).isRequired,authStore:Q.a.instanceOf(te.a).isRequired,queryStore:Q.a.instanceOf(o.a).isRequired})}}]);
//# sourceMappingURL=bundle-24.js.map